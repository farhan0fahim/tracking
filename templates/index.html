<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<title>Tab UI Design</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

<style>
body { margin:0; padding:20px; font-family: Arial; background:#f2f2f2; display:flex; flex-direction:column; min-height:100vh; }
header { background:#fff; border-bottom:1px solid #dee2e6; padding:10px; text-align:center; }
.logo { height:60px; }
.main-content { display:flex; flex:1; gap:20px; margin-top:20px; }
.profile-box { background:white; border-radius:8px; padding:30px; flex:0 0 70%; display:flex; gap:30px; align-items:center; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.profile-img { width:250px; height:250px; object-fit:cover; border-radius:8px; }
.profile-text { display:flex; flex-direction:column; justify-content:center; font-size:1.2rem; }
.profile-text h3 { font-size:2rem; font-weight:bold; margin-bottom:10px; }
.profile-text p { margin:5px 0; font-size:1.2rem; color:#555; }

.timetable-box { background:white; border-radius:8px; padding:20px; flex:0 0 30%; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.date-box { background:#0d6efd; color:white; border-radius:6px; padding:10px; text-align:center; margin-bottom:15px; font-weight:bold; }
.slot-header { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #0d6efd; font-weight:bold; color:#0d6efd; }
.slot { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #eee; }
.slot:last-child { border-bottom:none; }
.slot-time { font-weight:bold; width:40%; }
.slot-activity { width:60%; text-align:right; }

.notice-bar { background:#f8f9fa; border-top:1px solid #dee2e6; padding:10px 0; overflow:hidden; position:relative; margin-top:20px; }
.notice-scroll { display:inline-block; white-space:nowrap; animation:scroll-left 20s linear infinite; font-weight:500; color:#0d6efd; }
@keyframes scroll-left { 0% { transform:translateX(100%); } 100% { transform:translateX(-100%); } }
</style>
</head>

<body>
<header>
    <img src="https://daffodilvarsity.edu.bd/template/images/diulogoside.png" alt="Logo" class="logo" />
</header>

<div class="main-content">
    <!-- Left: Profile -->
    <div class="profile-box">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXoAdF57t23cG85vD07ezc_3ZVMqxpAMuJlb3poweZJvxKMn51uED1pWQz2MqYgejh5xk&usqp=CAU" alt="Profile" class="profile-img"/>
        <div class="profile-text">
            <h3 id="name">Amit Chakrabarty</h3>
            <p id="designation">Designation: Assistant Professor</p>
            <p>Location: <span id="loc">302</span></p>
            <p>Room number: <span id="room">302</span></p>
            <p>Status: <span id="state">Class</span></p>
        </div>
    </div>

    <!-- Right: Timetable -->
    <div class="timetable-box">
        <div class="date-box" id="date-time"></div>

        <div class="slot-header">
            <span class="slot-time">Timeslot</span>
            <span class="slot-activity">Activity</span>
        </div>

        <div id="slots"></div>
    </div>
</div>

<div class="notice-bar">
    <span id="notice" class="notice-scroll"></span>
</div>

<script>
function updateStatus() {
    fetch("/current").then(res => res.json()).then(data => {
        document.getElementById("loc").textContent = data.status["Location"];
        document.getElementById("room").textContent = data.status["Room number"];
        document.getElementById("state").textContent = data.status["state"];
        document.getElementById("notice").textContent = data.notice;
    });
}

function updateTimetable() {
    fetch("/timetable").then(res => res.json()).then(data => {
        document.getElementById("date-time").innerHTML = `<strong>${data.day}</strong> - ${data.date} ${data.time}`;
        const slotsDiv = document.getElementById("slots");
        slotsDiv.innerHTML = "";
        data.slots.forEach(slot => {
            const div = document.createElement("div");
            div.className = "slot";
            div.innerHTML = `<span class="slot-time">${slot.time}</span><span class="slot-activity">${slot.course}</span>`;
            slotsDiv.appendChild(div);
        });
    });
}

// Update every second
setInterval(updateStatus, 2000);
setInterval(updateTimetable, 1000);
updateStatus();
updateTimetable();
</script>

</body>
</html>
